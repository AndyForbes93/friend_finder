<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder | Quiz</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>
    <div class="container">

        <div class="jumbotron">
            <h1 class="text-center">
                <span class="fa fa-fire"></span> Friend Finder </h1>
            <hr>
            <h4 class="text-center">Answer the questions below as honest as possible</h4>
            <br>

            <div class="text-center">
                <a href="/">
                    <button class="btn btn-lg btn-default">
                        <span class="fa fa-home"> </span> HOME
                    </button>
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <!-- Quiz Page -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Friend Finder Quiz</h4>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <label for="friendName">Name</label>
                                <input type="name" class="form-control" id="friendName" placeholder="Enter Your Name">
                            </div>
                            <div class="form-group">
                                <label for="imageInput">Upload an Image</label>
                                <input type="file" class="form-control-file" id="imageInput" aria-describedby="fileHelp">
                            </div>
                            <!--Need to loop over questions to get them to display-->
                            <div class="question-form">
                            </div>

                            <button type="submit" class="btn btn-primary submit">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API Link</a> |
                    <a href="https://github.com/AndyForbes93/friend_finder" target=_blank>GitHub Repo</a>
                </p>
            </div>
        </footer>
    </div>

</body>

</html>

<script type="text/javascript">
    var questions = ["I am always perpared and follow a schedule", "I do not have a active imagination",
        "I feel comfortable talking to large crowds and meeting new people",
        "I am interested in helping people's problems", "I get irritated and stressed easily",
        "I enjoy using difficult words", "I never leave my belongs laying around",
        "I like drawing attention to myself", "I make people feel at ease",
        "I am much more anxious than most people"
    ];

    for (i = 0; i < questions.length; i++) {
        var questionForm = (
            `<div class="form-group">
                <label for="question${i}" id="questionAsk${i}">${questions[i]}</label>
                <select class="form-control" id="questionAnswer${i}">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                </select>
            </div>`
        );
        $(".question-form").append(questionForm);
    }



    $(".submit").on("click", function (event) {
        event.preventDefault();
        // Here we grab the form elements
        var newFriend = {
            friendName: $("#friendName").val().trim(),
            friendImage: $("#imageInput").val().trim(),
            scores: [$("#questionAnswer0").val(), 
                    $("#questionAnswer1").val(),
                    $("#questionAnswer2").val(),
                    $("#questionAnswer3").val(),
                    $("#questionAnswer4").val(),
                    $("#questionAnswer5").val(),
                    $("#questionAnswer6").val(),
                    $("#questionAnswer7").val(),
                    $("#questionAnswer8").val(),
                    $("#questionAnswer9").val()]
        };

        console.log(newFriend);

        $.post("/api/friends", newFriend,
            function (data) {

                if (data) {
                    //this will be a modal that display the person you match closest with
                    alert("The Results are in!");
                } else {
                    alert("error");
                }
                // $("#sfriendName").val("");
                // $("#imageInput").val("");
                // $("#questionAnswer1").val("");
            });

    });
</script>